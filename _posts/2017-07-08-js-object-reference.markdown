---
layout: post
title:  "왜 자바스크립트에서는 객체는 참조만될까"
date:   2017-07-08 21:00:00 +0900
categories: javascript, study
---
며칠전엔가 자바스크립트 공부하면서 객체에 대한 설명을 읽다가 이런 생각이 들었다

> 왜 자바스크립트에선 객체를 다른 이름에 넣을 때 복사가 아닌 참조만 되는 걸까?

```javascript
var a = {sayHi: "Hi!",
         sayHello: "Hello!"};
var b = a; // a와 b는 완전히 같은 객체
b.sayHi = "하이!";
console.log(a.sayHi);
//=> 하이!
```

변수의 경우에는,
```javascript
var a = 10;
var b = a; // b에 a의 값이 복사
b = 15;
console.log(a);
//=> 10
```

이런식으로 a와 b는 이제 서로다른 변수로서 취급돼서 b의 값을 바꾼다고 a의 값이 바뀌지는 않는다. 그래서 왜 객체는 복사가 아닌 참조가 되는걸까 하는 생각이 들었었다. *같은 내용의 객체를 복사해서 똑같은 놈으로 쓰고 싶을 때도 있지 않을까?* 라는 생각을 했다. 요즘 `c++`도 같이 공부를 하고 있어서 자연스럽게 그런 생각이 들었다. 그렇다고 길게 고민해보진 않고 그냥 그런갑다 하고 넘어갔다.

그러다가 오늘 자바스트립트의 `DOM`을 읽으면서 자바스크립트에서 객체를 넘길때 참조를 하는 이유를 번뜩 추론해냈다. 아마 내 생각이 맞지 않을까 확신하고 있다. 먼저 간단히 오늘 이해한 내용을 정리하면,

* DOM은 html 문서를 객체화 한 것이다.
* document 객체는 웹페이지의 모든 html객체를 갖고 있다.  
(원하는 객체에 접근하기 위해서는 document객체를 거쳐야한다.)
* 원하는 element의 객체를 찾기 위한 여러 매소드들이 document 객체에 정의되어 있다.
* document 객체는 노드트리로 이루어져있다.  
(getElementsByTagName() 메소드의 경우에는 `HTMLCollection` `객체`를 반환한다칸다.)
* 그렇게 접근해서 가져온 html 객체를 이러쿵저러쿵 조물조물 거리면서 다이나믹한 웹페이지를 만든다.

여기서 html의 element들을 객체로 만들고, 그것에 접근해서 고것을 요래조래 조물거린다는것이 핵심인것이다!

처음에 객체는 참조된다는 것을 봤을 때 나는 자바스크립트가 웹을 동적으로 만들어 준다는 사실만 알았지, DOM이 무엇인지는 모르는 상태였다. 그래서 c++에서 본것처럼 **왜 복사가 아닌 참조인거냐** 라는 생각을 했던거고. 지금 다시 생각해보면 당연히 참조만 해야한다. 자바스크립트는 웹을 위해서 만들어진 언어이고, DOM객체 이외에는 굳이 다른 객체를 다룰 이유가 없는 것이다. 그렇지 않으면 클래스라는 개념대신에 `function constructor`같은 형태를 취할 필요가 없지 않을까. 그렇기 때문에 객체를 넘길때는 참조만 하는 게 아닐까 싶다. element객체를 넘겨줄 때 참조가 아닌 복사가 일어난다면, 넘겨받은 이름으로 아무리 지지고 볶아봐야 페이지에 있는 놈이 변할리가 없으니까.

```javascript
var a = document.getElementById("example") // 만약 객체가 복사되서 a에 들어간다면
a.innerHTML = "Is it changed?" // 아무리 지지고 볶아봐야 아무소용 없다!
```

다른 사람들이 볼땐 뭐 당연한 소릴 주절거려놨나 싶을지도 모르겠다. 자바스크립트 공부한지 일주일만에 처음으로 뭔가 epiphany라고 할만한게 번뜩이니까, 혼자 흥분해서 익숙하지 않은 마크다운 문법 검색해가면서 블로그에 포스팅을 하고있다. 이런재미에 공부하지 싶다.
